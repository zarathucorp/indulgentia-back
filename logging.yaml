version: 1

formatters:
    standard:
        format: "%(asctime)s | %(levelname)s | %(message)s"

handlers:
    console:
        class: logging.StreamHandler
        level: INFO
        formatter: standard
    file:
        class: logging.handlers.TimedRotatingFileHandler
        level: INFO
        formatter: standard
        filename: logs/app.log
        when: midnight
        backupCount: 7
        encoding: utf-8

    custom_file:
        class: custom_handlers.CustomTimedRotatingFileHandler
        level: INFO
        formatter: standard
        filename: logs/app.log
        when: midnight
        backupCount: 7
        encoding: utf-8
        maxDays: 7

loggers:
    # root logger
    "":
        level: INFO
        handlers: [console, custom_file]
    
    # handlers=[] and propagate=false turns this logger off
    "uvicorn.access":
        handlers: []
        propagate: false
    
    # having this logger just propagate to root doesn't seem to work
    "uvicorn.error":
        handlers: [console, custom_file]
        propagate: false